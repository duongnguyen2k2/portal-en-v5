@model API.Models.Home.HomeModel
@using Microsoft.AspNetCore.Http;
@using Newtonsoft.Json;
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration
@using Microsoft.AspNetCore.Mvc.Localization
@using System.Globalization;
@inject IViewLocalizer Localizer
@{
    string Domain = "";
    if (Context.Request.IsHttps)
    {
        Domain = "https://" + Context.Request.Host;
    }
    else
    {
        Domain = "http://" + Context.Request.Host;
    }
    Layout = "Templates/" + Context.Session.GetString("TemplateName") + "/_LayoutHome";
    int IdCoQuan = int.Parse(Context.Session.GetString("DomainId").ToString());
    int ParentId = int.Parse(Context.Session.GetString("ParentId").ToString());

    List<API.Areas.Admin.Models.CategoriesAblums.CategoriesAblums> ListItemsAblums = API.Areas.Admin.Models.CategoriesAblums.CategoriesAblumsService.GetListFeatured(IdCoQuan, CultureInfo.CurrentCulture.Name.ToLower());

    string StrThongTinCoQuan = Context.Session.GetString("ThongTinCoQuan");
    API.Areas.Admin.Models.DMCoQuan.DMCoQuan ItemCoQuan = new API.Areas.Admin.Models.DMCoQuan.DMCoQuan();
    ItemCoQuan = JsonConvert.DeserializeObject<API.Areas.Admin.Models.DMCoQuan.DMCoQuan>(StrThongTinCoQuan);
    ViewData["Title"] = ItemCoQuan.Title;
    ViewData["Url"] = Domain;
    ViewData["Images"] = Domain + ItemCoQuan.MetadataCV.UrlImage;
    ViewData["Alias"] = ItemCoQuan.Title;
    ViewData["Description"] = ItemCoQuan.Metadesc;
    ViewData["Keywords"] = ItemCoQuan.Metakey;
    ViewData["Placename"] = ItemCoQuan.MetadataCV.Placename;
    ViewData["Type"] = "article";
}

@if (ItemCoQuan.TemplateName == "Kindergarten")
{
     @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialListCatFeaturedHome", new API.Models.Home.PartialListCatFeaturedHome() { ListBanners = Model.ListBanners, ItemCoQuan = ItemCoQuan, ListCatFeaturedHome = Model.ListCatArticle })

     <section class="junior__gallery__area bg--white section-padding--lg">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 col-md-12">
					<div class="section__title text-center">
						<h2 class="title__line">@Localizer["PhotosAboutUs"] </h2>
						<p>@Html.Raw(ItemCoQuan.MetadataCV.DescImages)</p>
					</div>
				</div>
			</div>
            <div class="row galler__wrap mt--40">

                @if (ListItemsAblums != null && ListItemsAblums.Count() > 0)
                {
                    for (int i = 0; i < ListItemsAblums.Count(); i++)
                    {
                        <!-- Start Single Gallery -->
				        <div class="col-lg-4 col-md-6 col-sm-6 col-12">
					        <div class="gallery wow fadeInUp" style="visibility: visible; animation-name: fadeInUp;">
						        <div class="gallery__thumb">
							        <a href="/albums.html">
								        <img src="@ListItemsAblums[i].Images" alt="@ListItemsAblums[i].Title">
							        </a>
						        </div>
						        <div class="gallery__hover__inner">
							        <div class="gallery__hover__action">
								        <ul class="gallery__zoom">
									        <li><a href="@ListItemsAblums[i].Images" data-lightbox="grportimg" data-title="@ListItemsAblums[i].Title"><i class="fa fa-search"></i></a></li>
									        <li><a href="/albums.html"><i class="fa fa-link"></i></a></li>
								        </ul>
								        <h4 class="gallery__title"><a href="/albums.html">@ListItemsAblums[i].Title</a></h4>
							        </div>
						        </div>
					        </div>	
				        </div>	
				        <!-- End Single Gallery -->

                    }
                }

				
            </div>
        </div>
    </section>

     @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialNewFeatured", new API.Models.Home.PartialNewFeatured() { ListBanners = Model.ListBanners, ItemCoQuan = ItemCoQuan })
}
else
{
    @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialNewFeatured", new API.Models.Home.PartialNewFeatured() { ListBanners = Model.ListBanners, ItemCoQuan = ItemCoQuan, ListHotArticles = Model.ListHotArticles})

    @if (Configuration["Security:SiteCode"] == "KTTT")
    {
        <div class="row">
            <div class="col-md-9">
                @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialListCatFeaturedHome", new API.Models.Home.PartialListCatFeaturedHome() { ListBanners = Model.ListBanners, ItemCoQuan = ItemCoQuan, ListCatFeaturedHome = Model.ListCatArticle })
            </div>
            <div class="col-md-3">
                @{
                    List<API.Areas.Admin.Models.Articles.Articles> NotificationList = API.Areas.Admin.Models.Articles.ArticlesService.GetListNotification(IdCoQuan, CultureInfo.CurrentCulture.Name.ToLower());
                    string DomainFolderUpload = Context.Session.GetString("DomainFolderUpload").ToString();
                    var ListBanners = API.Areas.Admin.Models.Banners.BannersService.GetList(IdCoQuan, ParentId, DomainFolderUpload, CultureInfo.CurrentCulture.Name.ToLower());
                }
                <!---------Thong bao ---------->
                <div class="category-list">
                    <div class="card border-0" id="featured-document">
                        <div class="card-header" style="background:none; padding-left: 0">
                            <ul class="list-inline flex-fill">
                                <li>
                                    <div class="category-list-title-right colored">
                                        <a class="text-uppercase font-weight-bold float-left" asp-controller="Articles" asp-action="Notification">
                                            <span class="category-list-title-icon"><i class="fas fa-volume-down"></i></span>
                                            <span class="pl-2">@Localizer["Notification"]</span>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div id="marquee_document_right" style="height:338px; overflow:hidden">
                                <ul>
                                    @if (NotificationList != null && NotificationList.Count() > 0)
                                    {


                                        @for (int i = 0; i < NotificationList.Count(); i++)
                                        {
                                            <li class="mb-2">
                                                <a asp-controller="Articles" asp-action="Detail" asp-route-id="@NotificationList[i].Id" asp-route-alias="@NotificationList[i].Alias" title="@NotificationList[i].Title">
                                                    @NotificationList[i].Title
                                                    <span>(@NotificationList[i].CreatedDate.ToString("dd/MM/yyy, HH:mm"))</span>
                                                </a>
                                            </li>
                                        }
                                    }
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!---------Banner Right Bottom ---------->
                @if (ListBanners != null && ListBanners.Count() > 0)
                {
                    @for (int i = 0; i < ListBanners.Count(); i++)
                    {
                        if (ListBanners[i].CatId == 5)
                        {
                            <div class="banner-item">
                                <a href="@ListBanners[i].Link" target="@ListBanners[i].Target" data-id="@ListBanners[i].Id">
                                    <img src="@ListBanners[i].Image" class="d-block w-100" title="@ListBanners[i].Title" loading="lazy" />
                                </a>
                            </div>
                        }

                    }
                }

                @if (ListBanners != null && ListBanners.Count() > 0)
                {
                    @for (int i = 0; i < ListBanners.Count(); i++)
                    {
                        if (ListBanners[i].CatId == 7)
                        {
                            <div class="banner-item">
                                <a href="@ListBanners[i].Link" target="@ListBanners[i].Target" data-id="@ListBanners[i].Id">
                                    <img src="@ListBanners[i].Image" class="d-block w-100" title="@ListBanners[i].Title" loading="lazy" />
                                </a>
                            </div>
                        }

                    }
                }

                @if (ListBanners != null && ListBanners.Count() > 0)
                {
                    @for (int i = 0; i < ListBanners.Count(); i++)
                    {
                        if (ListBanners[i].CatId == 8)
                        {
                            <div class="banner-item">
                                <a href="@ListBanners[i].Link" target="@ListBanners[i].Target" data-id="@ListBanners[i].Id">
                                    <img src="@ListBanners[i].Image" class="d-block w-100" title="@ListBanners[i].Title" loading="lazy" />
                                </a>
                            </div>
                        }

                    }
                }

                <partial name="Templates/@Context.Session.GetString("TemplateName")/_PartialSiteVisit" />

                @await Html.PartialAsync("_PartialThongTinCanThiet", ItemCoQuan)
            </div>
        </div>
        @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialVideoHome", ItemCoQuan)

        @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialLienKetWebsite", ItemCoQuan)
    }
    else
    {
        @await Html.PartialAsync("Templates/" + @Context.Session.GetString("TemplateName") + "/_PartialListCatFeaturedHome", new API.Models.Home.PartialListCatFeaturedHome() { ListBanners = Model.ListBanners, ItemCoQuan = ItemCoQuan, ListCatFeaturedHome = Model.ListCatArticle })
    }
    <section id="albums-home">
        <div class="row">
            <div class="col-12">
                <div class="category-list">
                    <div class="card border-0 list-item-home">
                        <div class="card-header">
                            <div class="panel-title">
                                <a class="text-uppercase font-weight-bold float-left" asp-controller="Albums" asp-action="Index">
                                    <span class="albums-home-icon"></span>
                                    <span class="pl-2">@Localizer["PhotoLibrary"]</span>
                                     @* <span class="pl-2">MultiMedia</span>  *@
                                </a>
                            </div>
                            
                            @if (Configuration["Security:SiteCode"] == "KTTT")
                            {
                                <ul class="list-inline flex-fill">
                                    <li>
                                        <div class="category-list-title pr-1">
                                            <nav class="nav nav-underline m-0 justify-content-end">
                                                <i class="fa fa-caret-right mr-2 mt-1 py-auto text-black-50" aria-hidden="true"></i>
                                                <a class="nav-link" asp-controller="Albums" asp-action="Index">@Localizer["Showmore"]</a>
                                            </nav>
                                        </div>
                                    </li>

                                </ul>
                            }
                        </div>
                        <div class="card-body p-0 mt-1">
                            <div class="banner-lienket-anh">
                                <div class="owl-carousel owl-theme albums-item" id="banner-lienket-anh-body">
                                    @if (ListItemsAblums != null && ListItemsAblums.Count() > 0)
                                    {
                                        for (int i = 0; i < ListItemsAblums.Count(); i++)
                                        {
                                            <div class="item">
                                                <a href="/albums.html" target="@ListItemsAblums[i].Title">
                                                    <img src="@ListItemsAblums[i].Images" alt="@ListItemsAblums[i].Title" />
                                                </a>
                                                @*                                                 <div class="info">
                                                    <h6 class="font-weight-bold text-white">
                                                        @ListItemsAblums[i].Title
                                                    </h6>
                                                </div> *@
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
@*                         <div class="card-body p-0 mt-1">
                            <div class="banner-lienket-anh">
                                <div class="owl-carousel owl-theme" id="banner-lienket-anh-body">
                                    @if (ListItemsAblums != null && ListItemsAblums.Count() > 0)
                                    {
                                        for (int i = 0; i < ListItemsAblums.Count(); i++)
                                        {
                                            <div class="item h-100">
                                                <a href="/albums.html" target="@ListItemsAblums[i].Title">
                                                    <img src="@ListItemsAblums[i].Images" alt="@ListItemsAblums[i].Title" />
                                                </a>
                                                <div class="info">
                                                    <h6 class="font-weight-bold">
                                                        @ListItemsAblums[i].Title
                                                    </h6>
                                                </div>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div> *@
                    </div>
                </div>
            </div>
        </div>

    </section>
}


@section Scripts{




}